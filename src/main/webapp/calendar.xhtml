<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
<h:head>
    <title>
        <ui:insert name="title">Recursos biblioteca</ui:insert>
    </title><title>Schedule Example</title>
    <link href="./resources/style.css" rel="stylesheet"/>
</h:head>
<h:body>
    <div id = "header" >
        <h:graphicImage id="header_logo" library="imagenes" name="logo-ecijg.width-380.png"/>
        <h:outputText id = "header_text" class = "text" value = "Escuela Colombiana de ingieneria Julio Garavito: Recursos de biblioteca"/>
    </div>
    <h:form id="Calendar">
        <p:growl id="messages" showDetail="true"/>

        <h:panelGrid columnClasses="value">
            #{calendarioBean.loadEvents()}
            <p:schedule id="schedule" value="#{calendarioBean.eventModel}" widgetVar="myschedule"
                        rightHeaderTemplate="agendaDay,agendaWeek,month,listYear"
                        timeZone="ZoneId.systemDefault()" clientTimeZone="local" draggable="false">

                <p:ajax event="eventSelect" listener="#{calendarioBean.onEventSelect}" update="eventDetails1"
                        oncomplete="PF('eventDetails1').show();" />

                <p:ajax event="eventMove" listener="#{calendarioBean.onEventMove}" update="messages"/>

                <p:ajax event="eventResize" listener="#{calendarioBean.onEventResize}" update="messages"/>

            </p:schedule>
        </h:panelGrid>

        <p:dialog widgetVar="eventDetails1" header="Horario de reserva" showEffect="clip" hideEffect="clip"
                  modal="true">

            <h:panelGrid id="eventDetails1" border="1" columns="2" styleClass="table-style">
                <h:outputLabel for="it-nombre-1" value="Id Recurso: " />
                <h:outputLabel id="it-nombre-1" value="  #{calendarioBean.eventId}"/>

                <h:outputLabel for="it-apellido-1" value="Apellido: " />
                <h:inputText id="it-apellido-1" />
            </h:panelGrid>

        </p:dialog>

        <p:panel header="Reservas" style="text-align: center" name="panel2" id="panel2">
            <p:dataTable  id="reservas" var="reserva" value="#{calendarioBean.consul()}" selectionMode="single" selection="#{calendarioBean.reserva}" rowKey="#{reserva.id}" rows="10" paginator="true"
                          paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}" currentPageReportTemplate="{startRecord}-{endRecord} of {totalRecords} records" style="text-align: left; align: center">
                <p:column headerText="Nombre">
                    <h:outputText value="#{reserva.id}" />
                </p:column>
                <p:column headerText="Inicio">
                    <h:outputText value="#{reserva.inicio}" />
                </p:column>
                <p:column headerText="Fin">
                    <h:outputText value="#{reserva.fin}" />
                </p:column>
            </p:dataTable>
        </p:panel>
    </h:form>
</h:body>
</html>