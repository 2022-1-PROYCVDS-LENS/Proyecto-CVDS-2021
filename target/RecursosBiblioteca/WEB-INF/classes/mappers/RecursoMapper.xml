<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="sampleprj.dao.mybatis.mappers.RecursoMapper">

    <resultMap type="Recurso" id="RecursoResult">
        <id property="id" column="id_recurso"/>
        <result property="nombre" column="nombre"/>
        <result property="habilitado" column="habilitado"/>
        <result property="ubicacion" column="ubicacion"/>
        <result property="ejemplares" column="ejemplares"/>
        <result property="capacidad" column="capacidad"/>
        <association property="tipo" javaType="TipoRecurso" resultMap="sampleprj.dao.mybatis.mappers.TipoRecursoMapper.TipoRecursoResult"/>
        <collection property="horarios" ofType="Horario" resultMap="sampleprj.dao.mybatis.mappers.HorarioMapper.HorarioResult" columnPrefix="ho_"/>
    </resultMap>

    <select id="consultarRecursos" resultMap="RecursoResult">
        select
        rec.nombre,
        rec.habilitado,
        rec.ubicacion,
        rec.capacidad,
        rec.ejemplares,
        tr.tipo,
        ho.horas,
        ho.estado
        from public.recursos as rec
        left join TiposRecursos as tr
        ON rec.id_tiporecurso = tr.id_tiporecurso
        left join Horarios as ho
        ON rec.id_recurso = ho.id_recurso;
    </select>

</mapper>